/*! For license information please see editor-current-user.js.LICENSE.txt */
!function(){"use strict";var e={"./packages/packages/libs/editor-current-user/src/api.ts":function(e,r,s){s.r(r),s.d(r,{apiClient:function(){return a}});var t=s("@elementor/http-client");const u="elementor/v1/user-data/current-user",n={params:{context:"edit"}},a={get:()=>(0,t.httpService)().get(u,n).then(e=>{const{capabilities:r=[],suppressedMessages:s=[]}=e.data;return{capabilities:r,suppressedMessages:s}}),update:e=>(0,t.httpService)().patch(u,{suppressedMessages:e.suppressedMessages})}},"./packages/packages/libs/editor-current-user/src/ensure-current-user.ts":function(e,r,s){s.r(r),s.d(r,{ensureUser:function(){return ensureUser}});var t=s("@elementor/query"),u=s("./packages/packages/libs/editor-current-user/src/api.ts"),n=s("./packages/packages/libs/editor-current-user/src/use-current-user.ts");async function ensureUser(){return(0,t.getQueryClient)().ensureQueryData({queryKey:[n.EDITOR_CURRENT_USER_QUERY_KEY],queryFn:u.apiClient.get,retry:!1})}},"./packages/packages/libs/editor-current-user/src/get-current-user.ts":function(e,r,s){s.r(r),s.d(r,{getCurrentUser:function(){return getCurrentUser}});var t=s("@elementor/query"),u=s("./packages/packages/libs/editor-current-user/src/use-current-user.ts");const getCurrentUser=()=>(0,t.getQueryClient)().getQueryData([u.EDITOR_CURRENT_USER_QUERY_KEY])},"./packages/packages/libs/editor-current-user/src/on-set-user.ts":function(e,r,s){s.r(r),s.d(r,{onSetUser:function(){return onSetUser}});var t=s("@elementor/editor-v1-adapters"),u=s("@elementor/query"),n=s("./packages/packages/libs/editor-current-user/src/use-current-user.ts");function onSetUser(e){let r;const s=(0,t.__privateListenTo)((0,t.v1ReadyEvent)(),()=>{const s=(0,u.getQueryClient)();r=s.getQueryCache().subscribe(r=>{r.query.queryKey.includes(n.EDITOR_CURRENT_USER_QUERY_KEY)&&e(r.query.state.data)})});return()=>{r(),s()}}},"./packages/packages/libs/editor-current-user/src/use-current-user-capabilities.ts":function(e,r,s){s.r(r),s.d(r,{useCurrentUserCapabilities:function(){return useCurrentUserCapabilities}});var t=s("./packages/packages/libs/editor-current-user/src/use-current-user.ts");const useCurrentUserCapabilities=()=>{const{data:e}=(0,t.useCurrentUser)();return{canUser:r=>Boolean(e?.capabilities.includes(r)),capabilities:e?.capabilities}}},"./packages/packages/libs/editor-current-user/src/use-current-user.ts":function(e,r,s){s.r(r),s.d(r,{EDITOR_CURRENT_USER_QUERY_KEY:function(){return n},useCurrentUser:function(){return useCurrentUser}});var t=s("@elementor/query"),u=s("./packages/packages/libs/editor-current-user/src/api.ts");const n="editor-current-user",useCurrentUser=()=>(0,t.useQuery)({queryKey:[n],queryFn:u.apiClient.get})},"./packages/packages/libs/editor-current-user/src/use-suppressed-message.ts":function(e,r,s){s.r(r),s.d(r,{useSuppressedMessage:function(){return useSuppressedMessage}});var t=s("./packages/packages/libs/editor-current-user/src/use-current-user.ts"),u=s("./packages/packages/libs/editor-current-user/src/use-update-current-user.ts");const useSuppressedMessage=e=>{const{data:r}=(0,t.useCurrentUser)(),{mutate:s}=(0,u.useUpdateCurrentUser)(),n=!!r?.suppressedMessages.includes(e);return[n,()=>{n||s({suppressedMessages:[...r?.suppressedMessages??[],e]})}]}},"./packages/packages/libs/editor-current-user/src/use-update-current-user.ts":function(e,r,s){s.r(r),s.d(r,{useUpdateCurrentUser:function(){return useUpdateCurrentUser}});var t=s("@elementor/query"),u=s("./packages/packages/libs/editor-current-user/src/api.ts"),n=s("./packages/packages/libs/editor-current-user/src/use-current-user.ts");const useUpdateCurrentUser=()=>{const e=(0,t.useQueryClient)();return(0,t.useMutation)({mutationFn:u.apiClient.update,onSuccess:()=>e.invalidateQueries({queryKey:[n.EDITOR_CURRENT_USER_QUERY_KEY]})})}},"@elementor/editor-v1-adapters":function(e){e.exports=window.elementorV2.editorV1Adapters},"@elementor/http-client":function(e){e.exports=window.elementorV2.httpClient},"@elementor/query":function(e){e.exports=window.elementorV2.query}},r={};function __webpack_require__(s){var t=r[s];if(void 0!==t)return t.exports;var u=r[s]={exports:{}};return e[s](u,u.exports,__webpack_require__),u.exports}__webpack_require__.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=function(e,r){for(var s in r)__webpack_require__.o(r,s)&&!__webpack_require__.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};!function(){__webpack_require__.r(s),__webpack_require__.d(s,{ensureUser:function(){return u.ensureUser},getCurrentUser:function(){return t.getCurrentUser},onSetUser:function(){return n.onSetUser},useCurrentUserCapabilities:function(){return r.useCurrentUserCapabilities},useSuppressedMessage:function(){return e.useSuppressedMessage}});var e=__webpack_require__("./packages/packages/libs/editor-current-user/src/use-suppressed-message.ts"),r=__webpack_require__("./packages/packages/libs/editor-current-user/src/use-current-user-capabilities.ts"),t=__webpack_require__("./packages/packages/libs/editor-current-user/src/get-current-user.ts"),u=__webpack_require__("./packages/packages/libs/editor-current-user/src/ensure-current-user.ts"),n=__webpack_require__("./packages/packages/libs/editor-current-user/src/on-set-user.ts")}(),(window.elementorV2=window.elementorV2||{}).editorCurrentUser=s}(),window.elementorV2.editorCurrentUser?.init?.();
//# sourceMappingURL=editor-current-user.js.map